{% extends "base.html.twig" %}

{% block header %}
    <nav>
        <h2>
            {% set name = "inconnu" %}
            {% if app.user %}
                {% if is_granted('ROLE_ADMIN') %}
                    {% set name = "admin " ~ app.user.userIdentifier %}
                {%  elseif is_granted('ROLE_CLIENT') %}
                    {% set name = "client " ~ app.user.userIdentifier %}
                {% elseif  is_granted('ROLE_SUPER_ADMIN') %}
                    {% set name = "super_admin " ~ app.user.userIdentifier%}
                {% endif %}
            {% endif %}
            Bienvenue cher {{ name }}
        </h2>
        <ul>
            {% if app.user %}
                <li><a href="{{ path('app_logout') }}">Logout</a></li>

                {% if is_granted('ROLE_CLIENT') or is_granted('ROLE_ADMIN') %}
                    <li><a href="{{ path('form_editProfil') }}">EditProfil</a></li>
                {% endif %}

                {% if is_granted("ROLE_CLIENT") %}
                    <li><a href="{{ path('produit_listProduit') }}">Magasin</a></li>
                    <li><a href="{{ path('accueil') }}">Accueil</a></li>
                    <li><a  href="#">Panier</a></li>
                {% endif %}

                {% if is_granted("ROLE_ADMIN") %}
                    <li><a href="{{ path('vente_listUser') }}">Users' list</a></li>
                    <li><a href="{{ path('produit_add') }}">addNewProduct</a></li>
                {% endif %}

                {% if is_granted("ROLE_SUPER_ADMIN") %}
                    <li><a href="{{ path('form_createAdmin') }}">CreateNewAdmin</a></li>
                    <li><a href="{{ path('accueil') }}">Accueil</a></li>
                {% endif %}

            {% endif %}

            {% if not app.user %}
                <li><a href="{{ path('app_login') }}">login </a></li>
                <li><a href="{{ path('form_createUser') }}">Sign in</a></li>
                <li><a href="{{ path('accueil') }}">Accueil</a></li>
            {% endif %}



        </ul>
    </nav>

    {% for type, messages in app.flashes %}
        {% for message in messages %}
            <div class="alert alert-{{ type }}">{{ message }}</div>
        {% endfor %}
    {% endfor %}

{% endblock %}
